# .cursorrules
---
title: "Pepperpy AI Governance"
version: "7.1"
scope: "Global"
immutable: true
updated: "2024-03-20"
dependencies:
  - "docs/project_structure.md"
  - "docs/status.md"
---

### Architectural Constitution
1. Preserve component boundaries from project_structure.md
2. New features must be extensions, not core modifications
3. Code must reflect documented architecture
4. Documentation drifts require immediate updates

### Code Quality Standards
- Type System:
  * Explicit generics required (list[str], not list)
  * Any type requires # type: ignore + justification comment
- Docstrings:
  * Mandatory sections: Args, Returns, Raises, Example
  * Forbidden: Unversioned TODOs (Use TODO[v2]: description)

### Provider Registration Flow
1. New Provider Submission
2. Validation Check:
   - Valid: Update registry + auto-documentation
   - Invalid: Reject with #INVALID-PROVIDER tag
3. Documentation generated in /docs/providers/

### Workflow Commandments
1. Atomic Commits Principle:
   - 1 logical change per commit
   - Example: "feat(providers): Add Claude 3 integration"
2. PR Validation Chain:
   - Lint → Type Check → Tests → Docs Review

### Anti-Patterns Policy
| Violation          | Action                     | Tag               |
|---------------------|----------------------------|--------------------|
| Hardcoded Values    | Immediate rejection        | CRITICAL-SECURITY  |
| Circular Dependencies| Mandatory refactor         | ARCH-REFACTOR      |
| Duplicate Code      | Component extraction       | CODE-DUPLICATION   |

### Context Management
- Required in all responses:
  [CAPv3]
  Sources: <guideline-sections>
  Validated: <UTC_TIMESTAMP>
  Scope: <arch/code/workflow>

### Validation Priority
1. Security Checks (35%)
2. Architectural Integrity (30%)
3. Documentation Accuracy (20%)
4. Performance (15%)

### Task Lifecycle
1. Creation: Link to architecture section + success metrics
2. Execution: Daily status.md updates + pre-commit checks
3. Completion: Docs audit + architecture impact report

### Knowledge Maintenance
- Auto-validation Schedule:
  * Core Rules: 30 days
  * Active Tasks: 24 hours
  * Dependencies: 7 days

### Emergency Protocols
1. Critical Fixes: #CRITICAL + 2 maintainer approvals
2. Experiments: #EXPERIMENTAL + sunset clause
3. Breaking Changes: 2-version deprecation cycle
